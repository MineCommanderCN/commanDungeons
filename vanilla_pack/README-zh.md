# commanDungeons 内容包制作文档指南

------

~~你以为这是说明，其实我是开发文档哒~~

## I. 起步

### 1. 新世界的大门

欢迎来到内容包创作的世界！你可以通过内容包来向游戏添加更多的游戏内容和翻译，包括新物品、新敌人、新关卡甚至是新的属性状态等等！本套文档将会以原生内容包为范例，提供一套完整的制作指南。

本指南假设作者对游戏原生内容和概念有充分了解。

点进包内的每一个目录，你都会看到对应的说明文档，并且会以相应目录内的内容作为范例提供说明。

### 2. 内容包的设计理念

- **无需编写任何代码。**仅需软编码的标准JSON文件就能自定义内容。
- **行为与显示分离。**每个自定义事物都有与之唯一对应且可自动识别的显示内容字符串键，这需要你写在翻译文件中。
- **包与命名空间一一对应。**每个包能且只能有唯一一个与众不同的命名空间。
- **对代码模组作者友好。**在游戏内部可以通过API轻松地读取内容包的内容。

## II. 基本概念

### 1. 内容包的目录结构

```
<内容包文件夹>
|- pack_info.meta **（必须包括且内容完整）**
|- translate （语言及显示内容）
   |- 若干个<语言代码>.json （通过json文件保存的翻译文件，修改config.ini中的lang选项可以启用对应的语言，所有包的语言文件会互相合并）
|- data （数据及行为内容）
   |- effects （自定义状态效果）
      |- 若干个json文件，定义状态效果的行为
   |- items （自定义物品）
      |- 若干个json文件，定义物品的行为
   |- levels （自定义关卡）
      |- 若干个json文件，定义关卡的**非显示**内容
   |- mobs （自定义敌人）
      |- 若干个json文件，定义敌人的行为和能力
   |- events （自定义事件）
      |- 若干个json文件，定义事件的内容，供敌人或玩家技能发动、物品使用时等触发
```



### 2. 内容包的识别

内容包是以含有`pack_info.meta`文件的文件夹作为识别条件的。如果需要安装内容包，只需要把包文件夹放入游戏文件夹中的packs目录。

`pack_info.meta`虽然使用~~类似于某游戏引擎Unity的资源信息文件~~的扩展名，但是它本质上还是JSON文件。以原生内容包为例：

```json
// vanilla\pack.info_meta
{
    "file_format": 1, //内容包格式版本，决定这个包能够兼容哪些版本的游戏（此版本为1）
    "namespace": "cmdungeons", //内容包的命名空间，不能与其他内容包重复
    "pack_version": "Alpha 0.1" //内容包版本，可以是任意ASCII字符串
}
```

你可能会对文件中如此少的信息表示怀疑，但是不要忘记“**行为与内容分离**”是内容包主要的一条设计主旨。包括`pack_info.meta`或是在data文件夹中的所有文件都只定义了事物的技术性信息，所有的显示信息需要写在翻译文件中——这会在之后的章节介绍。